# 第6回課題
## CloudTrailを使ってイベントを探す
* 確認した時点で最新のものを３つピックアップ
<img width="1418" alt="スクリーンショット 2023-02-02 15 53 21" src="https://user-images.githubusercontent.com/111736198/216254659-c21d5ea6-b405-431f-8478-8b94d4d386aa.png">
<img width="1418" alt="スクリーンショット 2023-02-02 16 06 44" src="https://user-images.githubusercontent.com/111736198/216255429-1b959f93-cdc6-4894-9693-1b5d6ccdbedd.png">
* StopDBInstanceはRDSを止めたということ。
* DescribeDBEngineVersionsは利用可能なエンジンのバージョンの情報を取得しているものだと思われる。

## CloudWatchアラームによるメール通知を設定
1. CloudWatchを開き、アラームを作成を選択
2. メトリクスの選択、今回はUnHealthyHostCount
3. Targetgroup、LoadBalancerは対象のものを選択する
4. 統計、期間の設定、今回は１分間の平均値で設定した
5. 条件の設定、Unhealthyが１より大きい場合に設定した
6. 通知の設定、今回はアラーム状態、OK状態をそれぞれ設定する。トピックを新規作成し、送信先を設定（既存アドレスを使用）
7. アラーム名の設定、今回はtask06として作成
8. 正常に動作するかを確認、それぞれ届いたものが以下の画像
<img width="1658" alt="スクリーンショット 2023-02-04 16 46 49" src="https://user-images.githubusercontent.com/111736198/216756841-31c63896-b855-4e50-942e-d347e693c124.png">
<img width="1638" alt="スクリーンショット 2023-02-04 16 46 25" src="https://user-images.githubusercontent.com/111736198/216756852-e72f4926-a907-4d5c-808b-458e3446e36f.png">

## 作成したリソースの見積もり作成
* https://calculator.aws/#/estimate?id=a049301cb9a96ecc92fe47d58a1f5440e88e3f71
* 初めて見る数値が多く、しっかりできているか不安ではあるが請求書やメトリクスを参考に作成した。

## 先月の料金
* EC2に関しては無料枠で収まっていたが他の部分で$3.01が発生していた。
* ElasticIP、RDSに料金がかかっていた。
* ElasticIPに関しては、EC2の停止をした際に解放し忘れてて料金が発生した。
* RDSに関しては、スナップショットが自動的に作られる設定にしてしまっていたため無料枠を圧迫していたのが原因だと思われる。設定を見直し作り直したところ課金は止まった。

## 感想
* アラームは結構自由に設定できるので、使いこなせればとても便利な機能だと感じた。
* 見積もりは数値が多くて慣れるまでにはもう少し勉強進めていく必要がありそう。
* 無料枠の通知は設定しているが思いもよらないところで料金が発生する可能性もあるので、しっかりと管理するようにしたい。
